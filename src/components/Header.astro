---
import Navigation from './Navigation.astro';

interface Props {
  title?: string;
}

const { title } = Astro.props;
---

<header id="site-header" class="site-header">
  <div class="header-light-overlay"></div>
  <div class="header-content">
    <Navigation />
  </div>
</header>

<script>
  // Header shadow effect on scroll (background stays solid white always)
  (function() {
    'use strict';
    
    function initHeaderScroll() {
      const header = document.getElementById('site-header');
      
      if (!header) {
        setTimeout(initHeaderScroll, 100);
        return;
      }
      
      let ticking = false;
      
      function updateHeaderStyles() {
        const scrollY = window.scrollY;
        
        // Add shadow when scrolled, but keep background solid white always
        if (scrollY > 20) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        
        ticking = false;
      }
      
      function onScroll() {
        if (!ticking) {
          window.requestAnimationFrame(updateHeaderStyles);
          ticking = true;
        }
      }
      
      // Initial state
      updateHeaderStyles();
      
      // Listen for scroll events
      window.addEventListener('scroll', onScroll, { passive: true });
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initHeaderScroll);
    } else {
      initHeaderScroll();
    }
  })();
</script>

<style>
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    transition: box-shadow 0.3s ease;
  }
  
  .header-light-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #ffffff;
    background-image: none;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    z-index: -1;
    opacity: 1;
    pointer-events: none;
  }
  
  .header-content {
    position: relative;
    z-index: 1;
  }
  
  /* Subtle shadow when scrolled */
  .site-header.scrolled {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }
  
  /* Ensure navigation links are visible */
  .site-header :global(.navigation__list a) {
    color: var(--color-ink, #1a1a1a);
  }
  
  .site-header :global(.navigation__logo) {
    color: var(--color-ink, #1a1a1a);
  }
</style>

